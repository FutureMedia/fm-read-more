document.addEventListener("DOMContentLoaded",(()=>{const e=300,t=document.querySelector(".entry-content"),s=document.querySelector(".fm-read-more-button");if(!t||!s)return void(s&&(s.style.display="none"));const n=t.innerHTML,a=s.dataset.moreText||"Read More",i=s.dataset.lessText||"Read Less";let d="",l=!1;function o(e,o=!0){l||(l=!0,t.classList.add("is-fading"),setTimeout((()=>{e?(t.innerHTML=n,s.textContent=i,t.classList.remove("is-collapsed"),t.classList.add("is-expanded"),t.style.maxHeight=t.scrollHeight+"px"):(t.innerHTML=d||n,s.textContent=a,t.classList.remove("is-expanded"),t.classList.add("is-collapsed"),t.style.maxHeight=""),t.classList.remove("is-fading"),setTimeout((()=>l=!1),Math.max(300,350))}),o?150:0))}function c(a){!function(){const s=document.createElement("div");s.innerHTML=n;const a=s.textContent||s.innerText||"";if(a.length<=e)return d=null,null;let i=-1;const l=[".","!","?"];for(let t=e;t<a.length;t++)if(l.includes(a[t])&&(t+1>=a.length||" "===a[t+1]||"\n"===a[t+1])){i=t+1;break}if(-1===i){let t=Math.min(a.length,450),s=a.substring(0,t).lastIndexOf(" ");i=s>210&&s>0?s:e}let o=a.substring(0,i).trim();i<a.length&&a.length>e&&(o+="..."),d=t.querySelector("p")?`<p>${o}</p>`:o}(),a&&null!==d?(t.classList.add("js-fm-read-more-managed"),s.classList.add("js-fm-read-more-active"),s.style.display="",o(!1,!1)):(t.classList.remove("js-fm-read-more-managed","is-collapsed"),t.classList.add("is-expanded"),t.innerHTML=n,t.style.maxHeight="",s.classList.remove("js-fm-read-more-active"),s.style.display="none")}s.addEventListener("click",(()=>{o(!t.classList.contains("is-expanded"))}));const r=window.matchMedia("(max-width: 800px)");r.addEventListener("change",(function(e){c(e.matches)})),c(r.matches)}));